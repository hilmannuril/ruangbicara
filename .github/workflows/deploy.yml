name: sftp-deploy

on:
  push:
    branches:
      - main

jobs:
  sftp-deploy:
    name: Deploy ke Rumahweb via SFTP
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Deploy ke Rumahweb via SFTP
        env:
          SFTP_USER: ${{ secrets.FTP_USERNAME }}
          SFTP_PASS: ${{ secrets.FTP_PASSWORD }}
        run: |
          # Install lftp tool
          sudo apt-get update && sudo apt-get install lftp -y
          
          # Deploy files using lftp
          lftp -u $SFTP_USER,$SFTP_PASS sftp://ruangbicara.online:22 -e "mirror -R . /home/ruax7678/public_html/; quit"
